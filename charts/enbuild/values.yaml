## @section Global parameters
## @param global.AppVersion [nullable,string] [default: ""] Provide custom appVersion, to override the default one. All the ENBUILD images will be of the same version. To use indidual tag for each service set the tag on per service basis.
## @param global.domain [default: ijuned.com] What domain to use to expose the ENBUILD using istio or Ingress
## @param global.disable_tls_gitlab [default: false] Set to true if you are using self-signed certificates
## @param global.ingress.enabled [default: false] Should we create the Ingress Resources ?
## @param global.ingress.tls [default: false] Is Ingress TLS enabled ?
## @param global.ingress.tls_secret [string] If Ingress is TLS enabled, Provide the Secret for the TLS Certificate.
## @param global.ingress.classname [string] Ingress classname if enabled.
## @param global.ingress.annotations [array] Ingress annotations if enabled.
## @param global.istio.enabled [default: false]   Should we create the Istio Resources ?
## @param global.istio.gateway Istio gateway to use for creating Virtual Service.
## @param global.image.registry [default: registry.gitlab.com]  Container registry to pull images from
## @param global.image.pullPolicy [default: Always]  Container imagePullPolicy
## @param global.image.registry_credentials [nullable,object] if the image.registry is private container registry, provide the credentials
## @param global.image.registry_credentials.username [nullable,string]  Container registry Username
## @param global.image.registry_credentials.password  [nullable,string] Container registry password
##
global:
  AppVersion: ""
  domain: ijuned.com
  disable_tls_gitlab: false # Set to true if you are using self-signed certificates
  ingress:
    enabled: false
    tls: false
    tls_secret: vivplatform-cert
    classname:
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
  istio:
    enabled: false
    gateway: istio-system/main
  image:
    registry: registry.gitlab.com
    pullPolicy: Always
    registry_credentials: {}
    # username: registry_user_name
    # password: registry_password

## @section ENBUILD Lightning Features to be enabled
## @param lightning_features.develop_lightning.application [default: false] Enable Bolt deployment
## @param lightning_features.develop_lightning.models [default: false] Enable JupyterHub deployment
## @param lightning_features.secure_lightning.ctf [default: false] Enable CTF deployment
## @param lightning_features.deploy_lightning.infra_lightning [default: false] Enable Data Lightning deployment
## @param lightning_features.deploy_lightning.data_lightning [default: false] Enable Data Lightning deployment
## @param lightning_features.deploy_lightning.ai_lightning [default: false] Enable AI Lightning deployment
## @param lightning_features.operations_lightning.headlamp [default: false] Enable Headlamp deployment
## @param lightning_features.operations_lightning.monitoring [default: false] Enable Loki Stack deployment
lightning_features:
  develop_lightning:
    application: false
    models: false
  secure_lightning:
    ctf: false
  deploy_lightning:
    infra_lightning: true
    data_lightning: false
    ai_lightning: false
  operations_lightning:
    headlamp: false
    monitoring: false

## @section ENBUILD RabbitMQ parameters
## @param rabbitmq.enabled  [default: true] Set to false to use existing RabbitMQ
## @param rabbitmq.replicaCount  RabbitMQ replicaCount
## @param rabbitmq.auth.username  RabbitMQ username
## @param rabbitmq.auth.password  RabbitMQ password
## @param rabbitmq.auth.erlangCookie  RabbitMQ erlangCookie
## @skip rabbitmq.clustering
## @param rabbitmq.host [nullable,string] If `rabbitmq.enabled` is false , provide the right rabbitmq endpoint
## @skip rabbitmq.env
## @param rabbitmq.queue_prefix Queue Prefix for all RabbitMQ Queues
## @param rabbitmq.image.registry RabbitMQ image registry
## @param rabbitmq.image.repository RabbitMQ image repository
## @param rabbitmq.image.tag RabbitMQ image tag

rabbitmq:
  enabled: true
  replicaCount: 1
  auth:
    username: admin
    password: SuperSecret
    erlangCookie: lamba
  clustering:
    forceBoot: true
  host: rabbitmq.rabbitmq # Needed only rabbitmq.enabled is false
  env: prod
  queue_prefix: enbuild
  image:
    registry: public.ecr.aws
    repository: bitnami/rabbitmq
    tag: 3.11.13-debian-11-r0

## @section ENBUILD Database parameters
## @param mongodb.enabled  [default: false] Set to true to Deploy the MongoDB.
## @param mongodb.mongo_root_username [string] DB username. If `mongodb.enabled` this is used to to set the username. Else this is username for existing Cosmos or DocumentDB
## @param mongodb.mongo_root_password [string]  DB Password. If `mongodb.enabled` this is used to to set the password. Else this is password for existing Cosmos or DocumentDB
## @param mongodb.mongo_server [nullable,string] If `mongodb.enabled` is false , provide the right cosmosDB/DocumentDB endpoint
## @param mongodb.image.repository Container repository for mongodb Container
## @param mongodb.image.tag Container tag for mongodb Container
mongodb:
  enabled: true
  mongo_root_username: "enbuild"
  mongo_root_password: "mongo_root_password"
  mongo_server: "If you are using cosmosDB then set the right cosmosDB endpoint as mongo_server and set the enabled=false"
  image:
    repository: enbuild-staging/vivsoft-platform-ui/mongodb
    tag: 4.4.5

## @section ENBUILD UI Services parameters
## @param enbuildUi.image.repository  Container repository for enbuildUi
## @param enbuildUi.image.tag  [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildUi.replicas Container enbuildUI Replicas
## @param enbuildUi.service_type  enbuildUI service_type
## @param enbuildUi.node_port  enbuildUI node_port
## @param enbuildUi.hostname  enbuild service hostname. `enbuildUi.hostname`.`global.domain` becomes your FQDN
## @param enbuildUi.kiali_url  kiali_url
## @param enbuildUi.grafana_url  grafana_url
## @param enbuildUi.loki_url  loki_url
## @param enbuildUi.kubecost_url  kubecost_url
enbuildUi:
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-frontend
  replicas: 1
  service_type: ClusterIP
  node_port: 30080
  hostname: enbuild # hostname.domain become FQDN
  kiali_url: "/kiali/"
  grafana_url: "/grafana/d/os6Bh8Omk/kubernetes-cluster?orgId=1&refresh=30s"
  loki_url: "/grafana/d/liz0yRCZz/logs-app?orgId=1"
  kubecost_url: "kubecost/overview.html"

## @section ENBUILD Backend Services parameters
## @param enbuildBk.image.repository  Container repository for enbuildBk
## @param enbuildBk.image.tag  [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildBk.replicas Container enbuildBk Replicas
## @param enbuildBk.service_type  enbuildBk service_type
## @param enbuildBk.encryption_key  encryption_key to be used by Backend
enbuildBk:
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-backend
  replicas: 1
  service_type: ClusterIP
  encryption_key: "encryption_key"

## @section ENBUILD USER Services parameters
## @param enbuildUser.image.repository  Container repository for enbuildUser
## @param enbuildUser.image.tag [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildUser.replicas Container enbuildUser Replicas
## @param enbuildUser.service_type  enbuildUser service_type
enbuildUser:
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-user
  replicas: 1
  service_type: ClusterIP

## @section ENBUILD Consumer Services parameters
## @param enbuildConsumer.image.repository  Container repository for enbuildConsumer
## @param enbuildConsumer.image.tag [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildConsumer.replicas Container enbuildConsumer Replicas
enbuildConsumer:
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-mq-consumer
  replicas: 1

## @section ENBUILD AI Services parameters
## @param enbuildAI.image.repository  Container repository for enbuildAI
## @param enbuildAI.image.tag  [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildAI.replicas Container enbuilAI Replicas
## @param enbuildAI.service_type  enbuildAI service_type
## @param enbuildAI.api_key  api_key [default: "dummy"] for OpenAI service if you planning to use OpenAI service
## @param enbuildAI.ollama.enabled [default: "ollama/llama3.2"] model_name for OpenAI service.
## @param enbuildAI.model_name [default: "ollama/llama3.2"] model_name for OpenAI service.
## @param enbuildAI.ollama_endpoint [default: "http://open-webui-ollama:11434"] ollama_endpoint for OpenAI service.
enbuildAI:
  ollama:
    enabled: false # Set to true to install Ollama
  model_name: "ollama/llama3.2"
  api_key: "dummy"
  ollama_endpoint: "http://open-webui-ollama:11434"
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-ai
  replicas: 1
  service_type: ClusterIP

## @section enbuildBolt Services parameters
## @param enbuildBolt.image.repository  Container repository for enbuildBolt
## @param enbuildBolt.image.tag  Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildBolt.replicas Container enbuildBolt Replicas
## @param enbuildBolt.service_type  enbuildBolt service_type
enbuildBolt:
  image:
    repository: ghcr.io/vivsoftorg/dev-lightning
    tag: v1.0.0
  replicas: 1
  service_type: ClusterIP

### @section enbuildCTF Services parameters
## @param enbuildCTF.image.repository  Container repository for enbuildCTF
## @param enbuildCTF.image.tag  [nullable] Container image tag. Skip to use the HelmChart appVersion as Image Tag
## @param enbuildCTF.replicas Container enbuildCTF Replicas
## @param enbuildCTF.service_type  enbuildCTF service_type
## @param enbuildCTF.debug  Set to true to enable debug mode in CTF backend
## @param enbuildCTF.mongodb_db_name  MongoDB database name for CTF backend
## @param enbuildCTF.cors_origins  Allowed CORS origins for CTF backend
## @param enbuildCTF.log_level  Log level for CTF backend
## @param enbuildCTF.log_format  Log format for CTF backend
## @param enbuildCTF.aws_region  AWS region for CTF backend to use AWS services like S3
## @param enbuildCTF.gitlab_api_base  GitLab API base URL for CTF backend
## @param enbuildCTF.gitlab_access_token  GitLab access token for CTF backend to access GitLab API
## @param enbuildCTF.resources.requests.memory  Memory resource request for CTF backend
## @param enbuildCTF.resources.requests.cpu  CPU resource request for CTF backend
## @param enbuildCTF.resources.limits.memory  Memory resource limit for CTF backend
## @param enbuildCTF.resources.limits.cpu  CPU resource limit for CTF backend

enbuildCTF:
  image:
    repository: enbuild-staging/vivsoft-platform-ui/enbuild-ctf
  replicas: 1
  service_type: ClusterIP
  debug: true
  mongodb_db_name: "ctf"
  cors_origins: "['http://localhost:5173','http://localhost:5000','http://localhost:3000']"
  log_level: "DEBUG"
  log_format: "json"
  aws_region: "us-east-1"
  gitlab_api_base: "https://gitlab.com/api/v4"
  gitlab_access_token: "gitlab_access_token"
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1"


## Third Party Charts
## @skip open-webui
open-webui:
  ollama:
    enabled: true
    image:
      tag: "0.3.1"
    ollama:
      gpu:
        enabled: false
        type: "nvidia"
        number: 1
      models:
        - llama3.2:1b
    runtimeClassName: ""
    persistentVolume:
      enabled: true

## @skip loki-stack
## @skip loki-stack.grafana
loki-stack:
  test_pod:
    enabled: false
  loki:
    enabled: true
  promtail:
    enabled: true
    config:
      clients:
        - url: http://{{ .Release.Name }}-loki:3100/loki/api/v1/push
  fluent-bit:
    enabled: false
  prometheus:
    enabled: true
  filebeat:
    enabled: false
  logstash:
    enabled: false
  grafana:
    enabled: true
    testFramework:
      enabled: false
    persistence:
      enabled: true
    adminPassword: V1v$oftR0ck5
    adminUser: admin
    dashboards:
      default:
        Logs_App:
          gnetId: 13639
          revision: 1
          datasource: Loki
        Kubernetes_Cluster:
          gnetId: 7249
          revision: 1
          datasource: Prometheus
    dashboardProviders:
      dashboardproviders.yaml:
        apiVersion: 1
        providers:
          - name: "default"
            orgId: 1
            folder: ""
            type: file
            disableDeletion: false
            editable: true
            options:
              path: /var/lib/grafana/dashboards/default
    grafana.ini:
      preferences:
        theme: light
      auth:
        disable_login_form: false
        auto_login: true
      auth.basic:
        enabled: true
      auth.anonymous:
        enabled: true
      security:
        allow_embedding: true
      feature_toggles:
        accessTokenExpirationCheck: true
      server:
        domain: enbuild.{{ .Values.global.domain }}
        root_url: "%(protocol)s://%(domain)s:%(http_port)s/grafana/"
        serve_from_sub_path: false

##@skip headlamp
headlamp:
  # Default values for headlamp.
  # This is a YAML-formatted file.
  # Declare variables to be passed into your templates.

  # -- Number of desired pods
  replicaCount: 1

  image:
    # -- Container image registry
    registry: ghcr.io
    # -- Container image name
    repository: headlamp-k8s/headlamp
    # -- Image pull policy. One of Always, Never, IfNotPresent
    pullPolicy: IfNotPresent
    # -- Container image tag, If "" uses appVersion in Chart.yaml
    tag: ""

  # -- An optional list of references to secrets in the same namespace to use for pulling any of the images used
  imagePullSecrets: []
  # -- Overrides the name of the chart
  nameOverride: ""
  # -- Overrides the full name of the chart
  fullnameOverride: ""

  # -- Override the deployment namespace; defaults to .Release.Namespace
  namespaceOverride: ""

  # -- An optional list of init containers to be run before the main containers.
  initContainers:
    - command:
        - /bin/sh
        - -c
        - mkdir -p /headlamp/plugins && cp -r /plugins/* /headlamp/plugins/
      # image: knrt10/headlamp-plugins-test:latest # it has all the plugins
      # image: ghcr.io/orange-cloudfoundry/headlamp-plugin:latest # no dynamic clusters plugin
      image: ghcr.io/vivsoftorg/enbuild-headlamp-theme:0.0.1
      imagePullPolicy: IfNotPresent
      name: headlamp-plugins
      volumeMounts:
        - mountPath: /headlamp/plugins
          name: headlamp-plugins

    - command:
        - /bin/sh
        - "-c"
        - |
          kubectl config set-cluster main --server=https://kubernetes.default.svc --certificate-authority=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          kubectl config set-credentials main --token=$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)
          kubectl config set-context main --cluster=main --user=main
          kubectl config use-context main
      env:
        - name: KUBERNETES_SERVICE_HOST
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: KUBERNETES_SERVICE_PORT
          value: "6443"
        - name: KUBECONFIG
          value: /home/headlamp/.config/Headlamp/kubeconfigs/config
      image: bitnami/kubectl:latest
      name: create-kubeconfig
      securityContext:
        capabilities:
          drop:
            - ALL
        privileged: false
        readOnlyRootFilesystem: true
        runAsGroup: 101
        runAsNonRoot: true
        runAsUser: 100
      volumeMounts:
        - mountPath: /home/headlamp/.config/Headlamp/kubeconfigs
          name: kubeconfig
  config:
    inCluster: true
    # -- base url path at which headlamp should run
    baseURL: "/headlamp"
    oidc:
      # Option 1:
      # @param config.oidc.secret - OIDC secret configuration
      # If you want to use an existing secret, set create to false and provide the name of the secret.
      # If you want to create a new secret, set create to true and provide the name of the secret.
      # Also provide the values for clientID, clientSecret, issuerURL, and scopes.
      # Example:
      # config:
      #   oidc:
      #     secret:
      #       create: true
      #       name: oidc
      secret:
        # -- Generate OIDC secret. If true, will generate a secret using .config.oidc.
        create: false
        # -- Name of the OIDC secret.
        name: oidc

      # Option 2:
      # @param config.oidc - OIDC env configuration
      # If you want to set the OIDC configuration directly, set the following values.
      # Example:
      # config:
      #   oidc:
      #     clientID: "clientID"
      #     clientSecret: "clientSecret"
      #     issuerURL: "issuerURL"
      #     scopes: "scopes"

      # -- OIDC client ID
      clientID: ""
      # -- OIDC client secret
      clientSecret: ""
      # -- OIDC issuer URL
      issuerURL: ""
      # -- OIDC scopes to be used
      scopes: ""
      # -- OIDC callback URL
      callbackURL: ""

      # -- OIDC client to be used during token validation
      validatorClientID: ""
      # -- OIDC Issuer URL to be used during token validation
      validatorIssuerURL: ""
      # -- Use 'access_token' instead of 'id_token' when authenticating using OIDC
      useAccessToken: false

      # Option 3:
      # @param config.oidc - External OIDC secret configuration
      # If you want to use an external secret for OIDC configuration, enable this option.
      # Provide the name of the secret to use.
      # Example:
      # config:
      #   oidc:
      #     secret:
      #       create: false
      #     externalSecret:
      #       enabled: true
      #       name: oidc
      externalSecret:
        enabled: false
        name: ""
    # -- directory to look for plugins
    pluginsDir: "/headlamp/plugins"
    watchPlugins: false
    # tlsCertPath: "/headlamp-cert/headlamp-ca.crt"
    # tlsKeyPath: "/headlamp-cert/headlamp-tls.key"
    # Extra arguments that can be given to the container. See charts/headlamp/README.md for more information.
    extraArgs:
      - "-enable-dynamic-clusters"

  # -- An optional list of environment variables
  # env:
  #   - name: KUBERNETES_SERVICE_HOST
  #     value: "localhost"
  #   - name: KUBERNETES_SERVICE_PORT
  #     value: "6443"

  # -- Mount Service Account token in pod
  automountServiceAccountToken: true

  serviceAccount:
    # -- Specifies whether a service account should be created
    create: true
    # -- Annotations to add to the service account
    annotations: {}
    # -- The name of the service account to use.(If not set and create is true, a name is generated using the fullname template)
    name: ""

  clusterRoleBinding:
    # -- Specified whether a cluster role binding should be created
    create: true
    # -- Set name of the Cluster Role with limited permissions from you cluster
    # for example - clusterRoleName: user-ro
    clusterRoleName: cluster-admin
    # -- Annotations to add to the cluster role binding
    annotations: {}

  # -- Annotations to add to the deployment
  deploymentAnnotations: {}

  # -- Annotations to add to the pod
  podAnnotations: {}

  # -- Labels to add to the pod
  podLabels: {}

  # -- Headlamp pod's Security Context
  podSecurityContext:
    {}
    # fsGroup: 2000

  # -- Headlamp containers Security Context
  securityContext:
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    runAsNonRoot: true
    privileged: false
    runAsUser: 100
    runAsGroup: 101
  # Uses these defaults if this is empty.
  #   allowPrivilegeEscalation: false
  #   runAsNonRoot: true
  #   seccompProfile:
  #     type: RuntimeDefault
  #   capabilities:
  #     drop:
  #       - ALL


  service:
    # -- Annotations to add to the service
    annotations: {}
    # -- Kubernetes Service type
    type: ClusterIP
    # -- Kubernetes Service port
    port: 80
    # -- Kubernetes Service clusterIP
    clusterIP: ""
    # -- Kubernetes Service loadBalancerIP
    loadBalancerIP: ""
    # -- Kubernetes Service loadBalancerSourceRanges
    loadBalancerSourceRanges: []
    # -- Kubernetes Service Nodeport
    nodePort: null

  # -- Headlamp containers volume mounts
  volumeMounts:
    - mountPath: /headlamp/plugins
      name: headlamp-plugins

    - mountPath: /home/headlamp/.config/Headlamp/kubeconfigs/config
      name: kubeconfig
      readOnly: true
      subPath: config

  # -- Headlamp pod's volumes
  volumes:
    - name: headlamp-plugins
      persistentVolumeClaim:
        claimName: enbuild-headlamp
    - name: kubeconfig
      emptyDir: {}

  persistentVolumeClaim:
    # -- Enable Persistent Volume Claim
    enabled: true
    # -- Annotations to add to the persistent volume claim (if enabled)
    annotations:
      {}
    # -- accessModes for the persistent volume claim, eg: ReadWriteOnce, ReadOnlyMany, ReadWriteMany etc.
    accessModes:
      - ReadWriteOnce
    # -- size of the persistent volume claim, eg: 10Gi. Required if enabled is true.
    size: "1Gi"
    # -- storageClassName for the persistent volume claim.
    storageClassName: ""
    # -- selector for the persistent volume claim.
    selector: {}
    # -- volumeMode for the persistent volume claim, eg: Filesystem, Block.
    volumeMode: ""

  ingress:
    # -- Enable ingress controller resource
    enabled: false
    # -- Annotations for Ingress resource
    annotations:
      {}
      # kubernetes.io/tls-acme: "true"

    # -- Additional labels to add to the Ingress resource
    labels: {}
      # app.kubernetes.io/part-of: traefik
      # environment: prod

    # -- Ingress class name. replacement for the deprecated "kubernetes.io/ingress.class" annotation
    ingressClassName: ""

    # -- Hostname(s) for the Ingress resource
    # Please refer to https://kubernetes.io/docs/reference/kubernetes-api/service-resources/ingress-v1/#IngressSpec for more information.
    hosts:
      []
      # - host: chart-example.local
      #   paths:
      #   - path: /
      #     type: ImplementationSpecific
    # -- Ingress TLS configuration
    tls: []
    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local

  # -- CPU/Memory resource requests/limits
  resources:
    {}
    # We usually recommend not to specify default resources and to leave this as a conscious
    # choice for the user. This also increases chances charts run on environments with little
    # resources, such as Minikube. If you do want to specify resources, uncomment the following
    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  # -- Node labels for pod assignment
  nodeSelector: {}

  # -- Toleration labels for pod assignment
  tolerations: []

  # -- Affinity settings for pod assignment
  affinity: {}

  # Plugin Manager Sidecar Container Configuration
  pluginsManager:
    # -- Enable plugin manager
    enabled: false
    # -- Plugin configuration file name
    configFile: "plugin.yml"
    # -- Plugin configuration content in YAML format. This is required if plugins.enabled is true.
    configContent: ""
    # -- Base node image to use
    baseImage: node:lts-alpine
    # -- Headlamp plugin package version to install
    version: latest
    # -- Plugin manager env variable configuration
    # env:
    # - name: HTTPS_PROXY
    #   value: "proxy.example.com:8080"
    # -- Specify resrouces
    # resources:
    #   requests:
    #     cpu: "500m"
    #     memory: "2048Mi"
    #   limits:
    #     cpu: "1000m"
    #     memory: "4096Mi"
    # If omitted, the plugin manager will inherit the global securityContext
    securityContext:
      {}
      # runAsUser: 1001
      # runAsNonRoot: true
      # allowPrivilegeEscalation: false
      # readOnlyRootFilesystem: true
      # capabilities:
      #   drop:
      #     - ALL

  podDisruptionBudget:
    # -- enable PodDisruptionBudget
    # ref: https://kubernetes.io/docs/concepts/workloads/pods/disruptions/
    enabled: false
    # @schema
    # type: [null, integer, string]
    # @schema
    # -- Minimum number/percentage of pods that should remain scheduled.
    # When it's set, maxUnavailable must be disabled by `maxUnavailable: null`
    minAvailable: 0
    # @schema
    # type: [null, integer, string]
    # @schema
    # -- Maximum number/percentage of pods that may be made unavailable
    maxUnavailable: null
    # @schema
    # type: [null, string]
    # @schema
    # -- How are unhealthy, but running, pods counted for eviction
    unhealthyPodEvictionPolicy: null

  # -- Additional Kubernetes manifests to be deployed. Include the manifest as nested YAML.
  extraManifests: []
  # - |
  #   apiVersion: v1
  #   kind: ConfigMap
  #   metadata:
  #     name: my-config
  #   data:
  #     key: value
  # - |
  #   apiVersion: v1
  #   kind: ConfigMap
  #   metadata:
  #     name: my-config-too
  #   data:
  #     key: value

## @skip jupyterhub
jupyterhub:
  proxy:
    service:
      type: ClusterIP
  hub:
    baseUrl: /jupyter
    config:
      JupyterHub:
        authenticator_class: dummy
        allow_named_servers: False
      Authenticator:
        auto_login: false
  cull:
    enabled: true
  singleuser:
    image:
      pullPolicy: Always

    profileList:
      - display_name: "CDAO Reliable AI Instance"
        description: "Includes base Reliable AI Security Toolkit Python Tools - Counterfit, Foolbox and Armory"
        default: true
        kubespawner_override:
          image: quay.io/jupyter/scipy-notebook:2025-10-27
          lifecycle_hooks:
            postStart:
              exec:
                command:
                  - /bin/sh
                  - -c
                  - |
                    cd /home/jovyan
                    if [ ! -d demo ]; then
                      git clone https://github.com/vivsoftorg/iris-flower-classifier-demo-notebook.git demo
                    fi

      - display_name: "CDAO Reliable AI Datascience Instance"
        description: "Includes base Reliable AI Explainability Toolkit Python Tools - XAITK, LIME, SHAP, Explainer Dashboard"
        kubespawner_override:
          image: quay.io/jupyter/datascience-notebook:2025-10-27
          lifecycle_hooks:
            postStart:
              exec:
                command:
                  - /bin/sh
                  - -c
                  - |
                    cd /home/jovyan
                    if [ ! -d demo ]; then
                      git clone https://github.com/vivsoftorg/iris-flower-classifier-demo-notebook.git demo
                    fi

      - display_name: "Spark Environment"
        description: "The Jupyter Stacks Spark image with demo notebooks"
        kubespawner_override:
          image: quay.io/jupyter/all-spark-notebook:2025-10-27
          lifecycle_hooks:
            postStart:
              exec:
                command:
                  - /bin/sh
                  - -c
                  - |
                    cd /home/jovyan
                    if [ ! -d demo ]; then
                      git clone https://github.com/vivsoftorg/iris-flower-classifier-demo-notebook.git demo
                    fi
